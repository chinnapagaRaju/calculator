


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculator</title>
  <link rel="stylesheet" href="calculator.css">
</head>
<body>
  <div class="calculator">
    <div class="calculator-title">Basic Calculator</div>
    <div class="top-bar">
      <div class="menu-toggle" onclick="toggleSidebar()"></div>
      <div class="theme-toggle" onclick="document.body.classList.toggle('dark-mode')"></div>
    </div>
    <div class="display">
      <div class="equation"></div>
      <div class="result">0</div>
    </div>
    <div class="keypad">
      <button id="clear" style="color: red;">C</button>
      <button id="sign">Â±</button>
      <button id="percent">%</button>
      <button id="divide" class="operator">Ã·</button>
      <button id="seven">7</button>
      <button id="eight">8</button>
      <button id="nine">9</button>
      <button id="multiply" class="operator">Ã—</button>
      <button id="four">4</button>
      <button id="five">5</button>
      <button id="six">6</button>
      <button id="subtract" class="operator">-</button>
      <button id="one">1</button>
      <button id="two">2</button>
      <button id="three">3</button>
      <button id="add" class="operator">+</button>
      <button id="zero">0</button>
      <button id="decimal">.</button>
      <button id="backspace">âŒ«</button>
      <button id="equals" class="operator">=</button>
    </div>
  </div>
  <div class="sidebar" id="sidebar">
    <div class="sidebar-title">ALL</div>
    <div class="sidebar-item" onclick="toggleContent('history', this)"><span class="icon">ðŸ“œ</span> History</div>
    <div class="sidebar-item" onclick="toggleContent('dateCalc', this)"><span class="icon">ðŸ“…</span> Date Calculation</div>
    <div class="sidebar-item" onclick="toggleContent('interests', this)"><span class="icon">ðŸ’°</span> Interests</div>
    <div class="sidebar-item" onclick="toggleContent('discount', this)"><span class="icon">ðŸ’¸</span> Discount Calculator</div>
    <div class="sidebar-item" onclick="toggleContent('fuel', this)"><span class="icon">â›½</span> Fuel Cost Calculator</div>
    <div class="sidebar-item" onclick="toggleContent('currency', this)"><span class="icon">ðŸ’±</span> Currency</div>
    <div id="contentArea" style="margin-top: 10px; display: none;"></div>
  </div>
  <script>
    const display = document.querySelector('.result');
    const equation = document.querySelector('.equation');
    const sidebar = document.getElementById('sidebar');
    const contentArea = document.getElementById('contentArea');
    let currentInput = '0';
    let previousInput = '';
    let operator = '';
    let shouldResetDisplay = false;
    let activeContent = '';

    // Load history from localStorage
    function loadHistory() {
      const history = JSON.parse(localStorage.getItem('calculatorHistory') || '[]');
      const oneWeekAgo = new Date();
      oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
      const filteredHistory = history.filter(item => new Date(item.timestamp) >= oneWeekAgo);
      localStorage.setItem('calculatorHistory', JSON.stringify(filteredHistory));
      console.log('Loaded History:', filteredHistory);
      return filteredHistory;
    }

    // Save calculation to history
    function saveToHistory(expression, result) {
      const history = loadHistory();
      const timestamp = new Date().toISOString();
      history.push({ expression, result, timestamp });
      localStorage.setItem('calculatorHistory', JSON.stringify(history));
      console.log('Saved to History:', { expression, result, timestamp });
      if (sidebar.classList.contains('active') && activeContent === 'history') renderHistory();
    }

    // Render history
    function renderHistory() {
      const history = loadHistory();
      console.log('Rendering History:', history);
      contentArea.innerHTML = '';
      if (history.length === 0) {
        contentArea.innerHTML = '<div style="text-align: center; color: var(--light-subtext); dark-mode: color: var(--dark-subtext);">No calculations yet.</div>';
      } else {
        history.forEach((item, index) => {
          const date = new Date(item.timestamp);
          const formattedDateTime = `${String(date.getDate()).padStart(2, '0')}-${String(date.getMonth() + 1).padStart(2, '0')}-${date.getFullYear()} ${String(date.getHours() % 12 || 12).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}:${String(date.getSeconds()).padStart(2, '0')} ${date.getHours() >= 12 ? 'PM' : 'AM'}`;
          const historyItem = document.createElement('div');
          historyItem.className = 'history-item';
          historyItem.innerHTML = `
            <span>${item.expression} = ${item.result}</span>
            <span>${formattedDateTime}</span>
            <button onclick="deleteHistoryItem(${index})">Delete</button>
          `;
          contentArea.appendChild(historyItem);
        });
      }
      contentArea.innerHTML += '<button class="clear-history-btn" onclick="clearHistory()" style="margin-top: 10px;">Clear</button>';
      contentArea.style.display = 'block';
    }

    // Delete specific history item
    function deleteHistoryItem(index) {
      const history = loadHistory();
      history.splice(index, 1);
      localStorage.setItem('calculatorHistory', JSON.stringify(history));
      if (activeContent === 'history') renderHistory(); // Keep sidebar open during deletion
    }

    // Clear all history
    function clearHistory() {
      localStorage.removeItem('calculatorHistory');
      if (activeContent === 'history') {
        contentArea.innerHTML = '<div style="text-align: center; color: var(--light-subtext); dark-mode: color: var(--dark-subtext);">No calculations yet.</div>';
        contentArea.innerHTML += '<button class="clear-history-btn" onclick="clearHistory()" style="margin-top: 10px;">Clear</button>';
        contentArea.style.display = 'block';
      }
    }

    // Toggle sidebar visibility
    function toggleSidebar() {
      const isActive = sidebar.classList.toggle('active');
      if (!isActive) {
        contentArea.style.display = 'none';
        activeContent = '';
      } else if (isActive && !activeContent) {
        contentArea.style.display = 'none'; // Ensure no content shows on initial open unless a link is clicked
      }
    }

    // Toggle content based on link clicked with animation
    function toggleContent(type, element) {
      contentArea.style.display = 'block'; // Ensure content area is visible when toggling
      // Remove animation from previously active item
      const activeItems = document.querySelectorAll('.sidebar-item.active');
      activeItems.forEach(item => item.classList.remove('active'));

      // Add animation to the clicked item
      element.classList.add('active');

      if (activeContent === type) {
        // If the same link is clicked again, hide the content
        contentArea.style.display = 'none';
        contentArea.innerHTML = '';
        activeContent = '';
      } else {
        // Clear previous content and show new content
        contentArea.innerHTML = '';
        activeContent = type;
        switch (type) {
          case 'history':
            renderHistory();
            break;
          case 'dateCalc':
            contentArea.innerHTML = `
              <div class="date-calc-container">
                <div class="date-section">
                  <label>From:</label>
                  <div class="date-input">
                    <input type="date" id="dateFrom" style="margin-right: 5px;">
                    <span class="calendar-icon">ðŸ“…</span>
                    <span id="fromDisplay" class="date-display">Select a date</span>
                  </div>
                </div>
                <div class="date-section">
                  <label>To:</label>
                  <div class="date-input">
                    <input type="date" id="dateTo" style="margin-right: 5px;">
                    <span class="icon">ðŸ“…</span>
                    <span id="toDisplay" class="date-display">Select a date</span>
                  </div>
                </div>
                <div class="difference-section">
                  <label>Difference:</label>
                  <div id="differenceVerbose" class="difference-display"></div>
                  <div id="differenceDays" class="difference-display"></div>
                </div>
                <button class="neon-button" onclick="calculateDateDiff()">BUTTON</button>
              </div>
            `;
            // Update display on date change
            document.getElementById('dateFrom').addEventListener('change', updateDateDisplay);
            document.getElementById('dateTo').addEventListener('change', updateDateDisplay);
            break;
          case 'interests':
            contentArea.innerHTML = `
              <div class="interest-container">
                <h3>Simple Interest Calculator</h3>
                <div class="input-section">
                  <label>Amount Borrowed (Principal):</label>
                  <input type="number" id="principal" placeholder="Enter amount" style="margin: 5px 0;">
                </div>
                <div class="input-section">
                  <label>Monthly Interest Rate (%):</label>
                  <input type="number" id="monthlyRate" placeholder="Enter rate %" step="0.01" style="margin: 5px 0;">
                </div>
                <div class="input-section">
                  <label>Loan Duration (Years):</label>
                  <input type="number" id="duration" placeholder="Enter years" style="margin: 5px 0;">
                </div>
                <div class="input-section">
                  <label>Currency:</label>
                  <select id="currency" style="margin: 5px 0; width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9;">
                    <option value="INR" selected>INR (Indian Rupee)</option>
                    <option value="USD">USD (United States Dollar)</option>
                    <option value="SGD">SGD (Singapore Dollar)</option>
                  </select>
                </div>
                <button class="neon-button" onclick="calculateInterest()">BUTTON</button>
                <div class="result-section">
                  <label>Total Interest Amount:</label>
                  <div id="totalInterest" class="result-display"></div>
                </div>
                <div class="result-section">
                  <label>Total Amount (Principal + Interest):</label>
                  <div id="totalAmount" class="result-display"></div>
                </div>
              </div>
            `;
            break;
          case 'discount':
            contentArea.innerHTML = `
              <div class="discount-container">
                <h3>Discount Calculator</h3>
                <div class="input-section">
                  <label>Original Price:</label>
                  <input type="number" id="originalPrice" placeholder="Enter price" step="0.01" style="margin: 5px 0;">
                </div>
                <div class="input-section">
                  <label>Discount Percent (%):</label>
                  <input type="number" id="discountPercent" placeholder="Enter discount %" step="0.01" style="margin: 5px 0;">
                </div>
                <button class="neon-button" onclick="calculateDiscount()">BUTTON</button>
                <div class="result-section">
                  <label>Amount Saved:</label>
                  <div id="amountSaved" class="result-display"></div>
                </div>
                <div class="result-section">
                  <label>Final Price:</label>
                  <div id="finalPrice" class="result-display"></div>
                </div>
              </div>
            `;
            break;
          case 'fuel':
            contentArea.innerHTML = `
              <div class="fuel-container">
                <h3>Fuel Cost Calculator</h3>
                <div class="input-section">
                  <label>Distance To Travel (km):</label>
                  <input type="number" id="distance" placeholder="Enter distance" step="0.01" style="margin: 5px 0;">
                </div>
                <div class="input-section">
                  <label>Fuel Efficiency (km/L):</label>
                  <input type="number" id="fuelEfficiency" placeholder="Enter efficiency" step="0.01" style="margin: 5px 0;">
                </div>
                <div class="input-section">
                  <label>Fuel Price (â‚¹/L):</label>
                  <input type="number" id="fuelPrice" placeholder="Enter price" step="0.01" style="margin: 5px 0;">
                </div>
                <button class="neon-button" onclick="calculateFuelCost()">BUTTON</button>
                <div class="result-section">
                  <label>Estimated Amount Of Fuel (L):</label>
                  <div id="fuelAmount" class="result-display"></div>
                </div>
                <div class="result-section">
                  <label>Estimated Cost (â‚¹):</label>
                  <div id="fuelCost" class="result-display"></div>
                </div>
              </div>
            `;
            break;
          case 'currency':
            contentArea.innerHTML = `
              <div class="currency-checker">
                <h3>Currency Checking</h3>
                <div class="currency-section">
                  <label>From Currency:</label>
                  <select id="fromCurrency" onchange="updateConversion()">
                    <option value="USD">US Dollar (USD)</option>
                    <option value="INR">Indian Rupee (INR)</option>
                    <option value="SGD">Singapore Dollar (SGD)</option>
                  </select>
                  <input type="number" id="fromAmount" placeholder="Enter amount" step="0.01" onchange="updateConversion()" oninput="validateInput(this)">
                </div>
                <div class="currency-section">
                  <label>To Currency:</label>
                  <select id="toCurrency" onchange="updateConversion()">
                    <option value="USD">US Dollar (USD)</option>
                    <option value="INR">Indian Rupee (INR)</option>
                    <option value="SGD">Singapore Dollar (SGD)</option>
                  </select>
                  <input type="number" id="toAmount" readonly>
                </div>
                <div class="rate-info" id="rateInfo">Rates as of Tue, Aug 05, 2025 09:28 AM IST * 1 USD = 87.83 INR</div>
                <button class="neon-button" onclick="refreshRates()">Refresh</button>
              </div>
            `;
            updateConversion(); // Initial calculation
            break;
        }
      }
    }

    // Update date display
    function updateDateDisplay() {
      const fromDate = document.getElementById('dateFrom').value;
      const toDate = document.getElementById('dateTo').value;
      if (fromDate) {
        const date = new Date(fromDate);
        document.getElementById('fromDisplay').textContent = date.toLocaleDateString('en-US', { day: 'numeric', month: 'long', year: 'numeric' });
      }
      if (toDate) {
        const date = new Date(toDate);
        document.getElementById('toDisplay').textContent = date.toLocaleDateString('en-US', { day: 'numeric', month: 'long', year: 'numeric' });
      }
    }

    // Date Calculation function
    function calculateDateDiff() {
      const fromDate = new Date(document.getElementById('dateFrom').value);
      const toDate = new Date(document.getElementById('dateTo').value);
      if (fromDate && toDate && !isNaN(fromDate) && !isNaN(toDate)) {
        const diffTime = Math.abs(toDate - fromDate);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        // Calculate verbose difference
        const years = Math.floor(diffDays / 365);
        const remainingDaysAfterYears = diffDays % 365;
        const months = Math.floor(remainingDaysAfterYears / 30);
        const remainingDays = remainingDaysAfterYears % 30;
        const weeks = Math.floor(remainingDays / 7);
        const days = remainingDays % 7;

        let verboseDiff = '';
        if (years > 0) verboseDiff += `${years} year${years > 1 ? 's' : ''}, `;
        if (months > 0) verboseDiff += `${months} month${months > 1 ? 's' : ''}, `;
        if (weeks > 0) verboseDiff += `${weeks} week${weeks > 1 ? 's' : ''}, `;
        if (days > 0) verboseDiff += `${days} day${days > 1 ? 's' : ''}`;
        verboseDiff = verboseDiff.trim().replace(/,+$/, '');

        document.getElementById('differenceVerbose').textContent = verboseDiff || '0 days';
        document.getElementById('differenceDays').textContent = `${diffDays} days`;
      } else {
        document.getElementById('differenceVerbose').textContent = 'Please select both dates.';
        document.getElementById('differenceDays').textContent = '';
      }
    }

    // Interest Calculation function
    function calculateInterest() {
      const principal = parseFloat(document.getElementById('principal').value);
      const monthlyRate = parseFloat(document.getElementById('monthlyRate').value);
      const durationYears = parseFloat(document.getElementById('duration').value);
      const currency = document.getElementById('currency').value;

      if (principal && monthlyRate && durationYears) {
        const totalMonths = durationYears * 12;
        const monthlyRateDecimal = monthlyRate / 100;
        const monthlyInterest = principal * monthlyRateDecimal;
        const totalInterest = monthlyInterest * totalMonths;
        const totalAmount = principal + totalInterest;

        const currencySymbols = { INR: 'â‚¹', USD: '$', SGD: 'S$' };
        document.getElementById('totalInterest').textContent = `${currencySymbols[currency]}${totalInterest.toFixed(2)}`;
        document.getElementById('totalAmount').textContent = `${currencySymbols[currency]}${totalAmount.toFixed(2)}`;
      } else {
        document.getElementById('totalInterest').textContent = 'Please fill all fields.';
        document.getElementById('totalAmount').textContent = '';
      }
    }

    // Discount Calculation function
    function calculateDiscount() {
      const originalPrice = parseFloat(document.getElementById('originalPrice').value);
      const discountPercent = parseFloat(document.getElementById('discountPercent').value);

      if (originalPrice && discountPercent) {
        const amountSaved = originalPrice * (discountPercent / 100);
        const finalPrice = originalPrice - amountSaved;

        document.getElementById('amountSaved').textContent = `â‚¹${amountSaved.toFixed(2)}`;
        document.getElementById('finalPrice').textContent = `â‚¹${finalPrice.toFixed(2)}`;
      } else {
        document.getElementById('amountSaved').textContent = 'Please fill all fields.';
        document.getElementById('finalPrice').textContent = '';
      }
    }

    // Fuel Cost Calculation function
    function calculateFuelCost() {
      const distance = parseFloat(document.getElementById('distance').value);
      const fuelEfficiency = parseFloat(document.getElementById('fuelEfficiency').value);
      const fuelPrice = parseFloat(document.getElementById('fuelPrice').value);

      if (distance && fuelEfficiency && fuelPrice) {
        const fuelAmount = distance / fuelEfficiency;
        const fuelCost = fuelAmount * fuelPrice;

        document.getElementById('fuelAmount').textContent = `${fuelAmount.toFixed(2)} L`;
        document.getElementById('fuelCost').textContent = `â‚¹${fuelCost.toFixed(2)}`;
      } else {
        document.getElementById('fuelAmount').textContent = 'Please fill all fields.';
        document.getElementById('fuelCost').textContent = '';
      }
    }

    // Currency Conversion functions
    let exchangeRates = {
      USD: { INR: 87.83, SGD: 1.33 },
      INR: { USD: 1 / 87.83, SGD: 1 / 66.06 },
      SGD: { USD: 1 / 1.33, INR: 66.06 }
    };
    let lastUpdated = new Date();

    function validateInput(input) {
      if (isNaN(input.value) || input.value === '') {
        input.value = 0;
      }
      updateConversion();
    }

    function updateConversion() {
      const fromCurrency = document.getElementById('fromCurrency').value;
      const toCurrency = document.getElementById('toCurrency').value;
      let fromAmount = parseFloat(document.getElementById('fromAmount').value) || 0;

      if (fromAmount < 0) fromAmount = 0; // Prevent negative amounts
      document.getElementById('fromAmount').value = fromAmount;

      const rate = exchangeRates[fromCurrency][toCurrency];
      const convertedAmount = fromAmount * rate;

      document.getElementById('toAmount').value = convertedAmount.toFixed(2);

      const rateInfo = document.getElementById('rateInfo');
      rateInfo.textContent = `Rates as of ${lastUpdated.toLocaleString('en-US', { weekday: 'short', month: 'short', day: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true })} IST * 1 ${fromCurrency} = ${rate.toFixed(2)} ${toCurrency}`;
    }

    function refreshRates() {
      // Simulate updated rates as of 09:28 AM IST, Aug 05, 2025
      exchangeRates = {
        USD: { INR: 87.91, SGD: 1.34 },
        INR: { USD: 1 / 87.91, SGD: 1 / 65.60 },
        SGD: { USD: 1 / 1.34, INR: 65.60 }
      };
      lastUpdated = new Date();
      updateConversion();
      console.log('Rates refreshed:', exchangeRates);
    }

    function updateDisplay() {
      display.textContent = currentInput;
      equation.textContent = previousInput + (operator || '');
    }

    function handleNumber(number) {
      if (shouldResetDisplay) {
        currentInput = number;
        shouldResetDisplay = false;
      } else {
        currentInput = currentInput === '0' ? number : currentInput + number;
      }
      updateDisplay();
    }

    function handleDecimal() {
      if (!currentInput.includes('.')) {
        currentInput += '.';
        updateDisplay();
      }
    }

    function handleOperator(op) {
      if (operator && !shouldResetDisplay) {
        calculate();
      }
      previousInput = currentInput;
      operator = op;
      shouldResetDisplay = true;
      updateDisplay();
    }

    function handleSign() {
      if (currentInput !== '0') {
        currentInput = currentInput.startsWith('-') ? currentInput.slice(1) : '-' + currentInput;
        updateDisplay();
      }
    }

    function handlePercent() {
      currentInput = (parseFloat(currentInput) / 100).toString();
      updateDisplay();
    }

    function clear() {
      currentInput = '0';
      previousInput = '';
      operator = '';
      shouldResetDisplay = false;
      updateDisplay();
    }

    function handleBackspace() {
      if (currentInput.length > 1) {
        currentInput = currentInput.slice(0, -1);
      } else {
        currentInput = '0';
      }
      updateDisplay();
    }

    function calculate() {
      let result;
      const prev = parseFloat(previousInput);
      const curr = parseFloat(currentInput);

      if (isNaN(prev) || isNaN(curr)) return;

      let expression = `${prev} ${operator} ${curr}`;
      switch (operator) {
        case '+':
          result = prev + curr;
          break;
        case '-':
          result = prev - curr;
          break;
        case 'Ã—':
          result = prev * curr;
          break;
        case 'Ã·':
          if (curr === 0) {
            alert('Cannot divide by zero');
            clear();
            return;
          }
          result = prev / curr;
          break;
        default:
          return;
      }

      saveToHistory(expression, result.toString());
      currentInput = result.toString();
      previousInput = '';
      operator = '';
      shouldResetDisplay = true;
      updateDisplay();
    }

    document.querySelectorAll('.keypad button').forEach(button => {
      button.addEventListener('click', () => {
        const id = button.id;
        if (['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'].includes(id)) {
          handleNumber(button.textContent);
        } else if (id === 'decimal') {
          handleDecimal();
        } else if (['add', 'subtract', 'multiply', 'divide'].includes(id)) {
          handleOperator(button.textContent);
        } else if (id === 'equals') {
          calculate();
        } else if (id === 'clear') {
          clear();
        } else if (id === 'sign') {
          handleSign();
        } else if (id === 'percent') {
          handlePercent();
        } else if (id === 'backspace') {
          handleBackspace();
        }
      });
    });

    // Initialize sidebar
    toggleSidebar();
  </script>
</body>
</html> 







